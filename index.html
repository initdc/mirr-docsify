<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>mirr.one | A free CDN for Open Source</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta
      name="description"
      content="A free CDN for Open Source, for Linux packages, npm registry and more..."
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0"
    />
    <link
      rel="icon"
      href="/_media/favicon.svg"
      sizes="any"
      type="image/svg+xml"
    />
    <link
      rel="stylesheet"
      href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css"
    />
  </head>
  <body>
    <div id="app"></div>
    <script>
      window.$docsify = {
        name: "mirr.one",
        nameLink: {
          "/zh-cn/": "#/zh-cn/",
          "/": "#/",
        },
        search: {
          paths: "auto",
          placeholder: {
            "/zh-cn/": "搜索",
            "/": "Search",
          },
          noData: {
            "/zh-cn/": "没有结果!",
            "/": "No results!",
          },
          pathNamespaces: ["/zh-cn"],
        },
        alias: {
          "/.*/_navbar.md": "/_navbar.md",
          ".*?/changelog":
            "https://cdn.jsdelivr.net/gh/initdc/mirr-docsify@master/CHANGELOG.md",

          // prepare for gitLocalize
          "/zh-cn/(.*)": "https://cdn.jsdelivr.net/gh/initdc/mirr-zh@master/$1",
        },
        coverpage: true,
        loadSidebar: true,
        loadNavbar: true,
        plugins: [
          function (hook, vm) {
            let footer = `>---
## Sponsors
- [Fastly](https://www.fastly.com/)
`;

            hook.beforeEach(function (html) {
              let url;

              if (/githubusercontent\.com/.test(vm.route.file)) {
                url = vm.route.file
                  .replace("raw.githubusercontent.com", "github.com")
                  .replace(/\/master/, "/blob/master");
              } else if (/jsdelivr\.net/.test(vm.route.file)) {
                url = vm.route.file
                  .replace("cdn.jsdelivr.net/gh", "github.com")
                  .replace("@master", "/blob/master");
              } else {
                url =
                  "https://github.com/initdc/mirr-docsify/blob/master/" +
                  vm.route.file;
              }

              let editHtml = "\n[:memo: Edit Document](" + url + ")\n";

              if (vm.route.path === "/") {
                return html + editHtml;
              }

              return html + editHtml + footer;
            });
          },
        ],
      };
    </script>
    <script src="//cdn.jsdelivr.net/npm/docsify@4/lib/docsify.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/docsify@4/lib/plugins/search.min.js"></script>
  </body>
</html>
